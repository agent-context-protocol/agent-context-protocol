{
    "1": {
        "1": {
            "subtask_description": "List the schema of all tables in the public schema of the database.",
            "steps": {
                "1": {
                    "tool": "query",
                    "handles": "Retrieves all table and column names/types in the public schema for grounding",
                    "input_vars": [
                        {
                            "name": "get_schema_sql",
                            "parameter": [
                                "sql"
                            ],
                            "type": "string",
                            "source": "LLM_Generated",
                            "description": "SQL to list table_name, column_name, and data_type for all public tables",
                            "value": "SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema='public';",
                            "dependencies": []
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "all_schema_info",
                            "description": "Schema details for all tables in the public schema",
                            "used_by": [
                                {
                                    "sub_task": 2,
                                    "step": 1
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "2": {
            "subtask_description": "Compute the total revenue generated by the customers each sales employee supports.",
            "steps": {
                "1": {
                    "tool": "query",
                    "handles": "Using the schema, computes total revenue per sales employee",
                    "input_vars": [
                        {
                            "name": "all_schema_info",
                            "parameter": [
                                "sql"
                            ],
                            "type": "string",
                            "source": "TOOL_Output (sub_task 1, Step 1)",
                            "description": "Use schema info to form the correct SQL for total revenue per sales employee",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 1,
                                    "step": 1
                                }
                            ]
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "employee_revenue_list",
                            "description": "List of sales employees with their total revenue",
                            "used_by": [
                                {
                                    "sub_task": 3,
                                    "step": 1
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "3": {
            "subtask_description": "Rank the sales employees by their total revenue and extract the top three performers.",
            "steps": {
                "1": {
                    "tool": "perplexity_reason",
                    "handles": "Ranks employees by revenue and extracts the top three",
                    "input_vars": [
                        {
                            "name": "employee_revenue_list",
                            "parameter": [
                                "messages"
                            ],
                            "type": "array",
                            "source": "TOOL_Output (sub_task 2, Step 1)",
                            "description": "List of employees and their revenue to be ranked",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 2,
                                    "step": 1
                                }
                            ]
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "top_three_employees",
                            "description": "Top three sales employees by revenue",
                            "used_by": [
                                {
                                    "sub_task": 4,
                                    "step": 1
                                },
                                {
                                    "sub_task": 5,
                                    "step": 1
                                },
                                {
                                    "sub_task": 7,
                                    "step": 1
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "4": {
            "subtask_description": "Create a colorful column chart visualizing the top three sales employees and their total revenue.",
            "steps": {
                "1": {
                    "tool": "generate_column_chart",
                    "handles": "Generates a colorful column chart for the top three employees",
                    "input_vars": [
                        {
                            "name": "top_three_employees",
                            "parameter": [
                                "data"
                            ],
                            "type": "array",
                            "source": "TOOL_Output (sub_task 3, Step 1)",
                            "description": "Data for the column chart (top three employees and their revenue)",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 3,
                                    "step": 1
                                }
                            ]
                        },
                        {
                            "name": "chart_title",
                            "parameter": [
                                "title"
                            ],
                            "type": "string",
                            "source": "LLM_Generated",
                            "description": "Title for the chart",
                            "value": "Top 3 Sales Employees by Revenue",
                            "dependencies": []
                        },
                        {
                            "name": "axisXTitle",
                            "parameter": [
                                "axisXTitle"
                            ],
                            "type": "string",
                            "source": "LLM_Generated",
                            "description": "X-axis title",
                            "value": "Employee",
                            "dependencies": []
                        },
                        {
                            "name": "axisYTitle",
                            "parameter": [
                                "axisYTitle"
                            ],
                            "type": "string",
                            "source": "LLM_Generated",
                            "description": "Y-axis title",
                            "value": "Total Revenue",
                            "dependencies": []
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "column_chart_url",
                            "description": "URL or reference to the generated column chart",
                            "used_by": [
                                {
                                    "sub_task": 7,
                                    "step": 1
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "5": {
            "subtask_description": "Generate a brief, rhyming tagline praising the top-performing sales employee.",
            "steps": {
                "1": {
                    "tool": "perplexity_reason",
                    "handles": "Creates a rhyming tagline for the top performer",
                    "input_vars": [
                        {
                            "name": "top_three_employees",
                            "parameter": [
                                "messages"
                            ],
                            "type": "array",
                            "source": "TOOL_Output (sub_task 3, Step 1)",
                            "description": "Data containing the top performer\u2019s name for tagline generation",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 3,
                                    "step": 1
                                }
                            ]
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "top_performer_tagline",
                            "description": "Rhyming tagline praising the top performer",
                            "used_by": [
                                {
                                    "sub_task": 7,
                                    "step": 1
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "6": {
            "subtask_description": "List all public Slack channels to retrieve the channel ID for llm_agents_proj.",
            "steps": {
                "1": {
                    "tool": "slack_list_channels",
                    "handles": "Lists public Slack channels to find llm_agents_proj",
                    "input_vars": [
                        {
                            "name": "slack_channel_limit",
                            "parameter": [
                                "limit"
                            ],
                            "type": "number",
                            "source": "LLM_Generated",
                            "description": "Maximum number of channels to return",
                            "value": "100",
                            "dependencies": []
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "llm_agents_proj_channel_id",
                            "description": "Slack channel ID for llm_agents_proj",
                            "used_by": [
                                {
                                    "sub_task": 7,
                                    "step": 1
                                }
                            ]
                        }
                    ]
                }
            }
        },
        "7": {
            "subtask_description": "Post a nicely formatted message to llm_agents_proj Slack channel, including the ranked list, chart, and tagline.",
            "steps": {
                "1": {
                    "tool": "slack_post_message",
                    "handles": "Posts the results to llm_agents_proj with all required info",
                    "input_vars": [
                        {
                            "name": "llm_agents_proj_channel_id",
                            "parameter": [
                                "channel_id"
                            ],
                            "type": "string",
                            "source": "TOOL_Output (sub_task 6, Step 1)",
                            "description": "Slack channel ID for llm_agents_proj",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 6,
                                    "step": 1
                                }
                            ]
                        },
                        {
                            "name": "top_three_employees",
                            "parameter": [
                                "text"
                            ],
                            "type": "string",
                            "source": "TOOL_Output (sub_task 3, Step 1)",
                            "description": "Ranked list of top three employees and their revenue",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 3,
                                    "step": 1
                                }
                            ]
                        },
                        {
                            "name": "column_chart_url",
                            "parameter": [
                                "text"
                            ],
                            "type": "string",
                            "source": "TOOL_Output (sub_task 4, Step 1)",
                            "description": "URL or reference to the column chart",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 4,
                                    "step": 1
                                }
                            ]
                        },
                        {
                            "name": "top_performer_tagline",
                            "parameter": [
                                "text"
                            ],
                            "type": "string",
                            "source": "TOOL_Output (sub_task 5, Step 1)",
                            "description": "Rhyming tagline for the top performer",
                            "value": "None",
                            "dependencies": [
                                {
                                    "sub_task": 5,
                                    "step": 1
                                }
                            ]
                        }
                    ],
                    "output_vars": [
                        {
                            "name": "slack_message_confirmation",
                            "description": "Confirmation or result of posting to Slack",
                            "used_by": []
                        }
                    ]
                }
            }
        }
    }
}